---
layout: post
title: "[spring][xml] web.xml url-pattern / 와 /* 의 차이점 "
date: '2015-08-03T06:31:00.002-07:00'
author: Jaeyoung Lee
tags:
- spring
modified_time: '2015-08-03T06:31:21.416-07:00'
blogger_id: tag:blogger.com,1999:blog-5872989675159532416.post-1674692656890308691
blogger_orig_url: http://polyglot-m.blogspot.com/2015/08/springxml-webxml-url-pattern.html
---

<div class="article" style="background-color: white; font-family: 돋움; font-size: 12px; line-height: 10.285714149475098px; overflow: hidden; text-align: justify; width: 610px;"><div class="tt_article_useless_p_margin" style="line-height: 1.5;"><div style="line-height: 1.5; padding: 0px;"><span style="font-family: '맑은 고딕'; font-size: medium;"><span style="line-height: 29.8666648864746px;"><b>출처 :&nbsp;</b></span></span><span style="font-family: 맑은 고딕; font-size: small;"><span style="line-height: 29.8666648864746px;"><b><a class="con_link" href="http://lng1982.tistory.com/97" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://lng1982.tistory.com/97</a>&nbsp;-탁구치는 개발자</b></span></span></div><div style="line-height: 1.5; padding: 0px;"><br /></div><div style="line-height: 1.5; padding: 0px;"><span style="font-family: 맑은 고딕; font-size: small;"><span style="line-height: 29.8666648864746px;"><b>아래 게시된 글은 커먼 라이센스에 따라 인용하였으며,</b></span></span></div><div style="line-height: 1.5; padding: 0px;"><span style="font-family: 맑은 고딕; font-size: small;"><span style="line-height: 29.8666648864746px;"><b>영리 목적으로 사용시에 원 저작자와 협의 하셔야 합니다.</b></span></span></div><div style="line-height: 1.5; padding: 0px;"><span style="font-family: 맑은 고딕; font-size: small;"><span style="line-height: 29.8666648864746px;"><b>무단 도용시 모든 책임은 사용자에게 있습니다.</b></span></span></div><div style="line-height: 1.5; padding: 0px;"><span style="font-family: 맑은 고딕; font-size: small;"><span style="line-height: 29.8666648864746px;"><b><br /></b></span></span></div><div style="line-height: 1.5; padding: 0px;"><span style="font-family: 맑은 고딕; font-size: small;"><span style="line-height: 29.8666648864746px;"><b>------------------------------------------------------------------------</b></span></span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><b><span style="color: black; font-size: 14pt;"><br /></span></b></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><b><span style="color: black; font-size: 14pt;">[*.do에서 /* 로 바꾸게 된 이유]</span></b></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt; line-height: 2;">스프링 3.1 샘플 프로젝트의 web.xml(DD) 구성 시 url-pattern을 *.do와 같이 설정하였다.</span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt;">이유는 단순하다.</span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt;">프로젝트를 진행할 때 항상 *.do를 사용했기 때문이다.</span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt;">하지만 REST 방식의 웹 어플리케이션을 구성하기 위해서는 다음과 같은 URL 형식을 제공해야 하는데 현재는 *.do와 같이 되어 있기 때문에 pattern을 /* 와 같이 변경해야만 했다.</span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt;"><a class="con_link" href="http://localhost:8080/user/list" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://localhost:8080/user/list</a></span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><b><span style="color: black; font-size: 14pt;">[현상]</span></b></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt;">이제 내가 만들어 놓은 프로젝트는 REST 방식을 지원하는 spring web application이 되었다.</span></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2; padding: 0px;"><span style="font-size: 10pt;">허나&nbsp;controller mapping url을 호출하면 404 에러가 발생하면서 아래와 같은 로그가 찍힌다.</span></div><div class="txc-textbox" style="background-color: #fedec7; border: 1px solid rgb(254, 222, 199); color: #666666; font-family: '맑은 고딕'; line-height: 10.285714149475098px; padding: 10px;"><div style="line-height: 1.5; padding: 0px;"><span style="font-size: 10pt;">No mapping found for HTTP request with URI [/WEB-</span></div><div style="line-height: 1.5; padding: 0px;"><br /></div><div style="line-height: 1.5; padding: 0px;"><span style="font-size: 10pt;">INF/view/common/layout/default/layout.jsp] in&nbsp;</span></div><div style="line-height: 1.5; padding: 0px;"><br /></div><div style="line-height: 1.5; padding: 0px;"><span style="font-size: 10pt;">DispatcherServlet with name 'dispatcher'</span>&nbsp;</div></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px; padding: 0px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px;"><div style="line-height: 2;"><b><span style="color: black; font-size: 14pt;">[원인]</span></b></div><div style="line-height: 2;"><span style="font-size: 10pt;">controller mapping url을 못 찾아서 발생하는 404가 아닌 /WEB-INF/view/common/layout/default/layout.jsp 의 매핑 URL을 찾을 수 없어서 발생하는 오류였다.</span></div><div style="line-height: 2;"><br /></div><div style="line-height: 2;"><span style="font-size: 10pt;">이 오류가 발생하는 원인을 알기 위해서는 서블릿 컨테이너와 웹 어플리케이션간의 연동 방법을 알아야 한다.</span></div><div style="line-height: 2;"><span style="font-size: 10pt;">일단 url-pattern에 등록할 수 있는 URL은 다음과 같다.</span></div><div style="line-height: 2;"><div class="txc-textbox" style="background-color: #dbe8fb; border: 1px solid rgb(219, 232, 251); line-height: 1.5; padding: 10px;"><div style="line-height: 1.5;"><span style="font-size: 10pt;">"/"로 시작하고 "/*"로 끝나는 패턴은 path로 인식</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">"*."으로 시작하는 경우 확장자 매칭</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">"/"만 정의한 경우 디폴트 서블릿 의미</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">그 외의 경우 동치 매칭</span></div></div></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 2;"><span style="font-size: 10pt;">위의 패턴 매칭에 존재하지는 않지만 /*는 요청 받는 모든 URL을 처리한다는 의미다. (아래와 같은 유형의 패턴 모두)</span></div><div class="txc-textbox" style="background-color: #dbe8fb; border: 1px solid rgb(219, 232, 251); line-height: 2; padding: 10px;"><div style="line-height: 1.5;"><span style="font-size: 10pt;">/user/list</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">/user/list.do</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">/user/userList.jsp</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">/img/test.png</span></div></div><div style="line-height: 2;"><br /></div><div style="line-height: 2;"><span style="font-size: 10pt;">결국 모든 요청을 DispatcherServlet에서 처리하겠다고 지정했으니 jsp에 대한 호출도 DispatcherServlet이 처리를 하려고 했던 것이다.</span></div><div style="line-height: 2;"><span style="font-size: 10pt;">이로 인하여 jsp에 해당하는 mapping url을 찾을 수 없어 HTTP 404 오류가 발생하게 된 것이다.</span></div></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2;"><div style="line-height: 1.5;"><span style="color: #0055ff;"><b><span style="color: black; font-size: 14pt;">[해결 방안]</span></b></span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">그럼 해결 방법은 뭘까?</span></div><div style="line-height: 1.5;"><b><span style="color: red; font-size: 10pt;">결론적으로 말하자면 url-pattern을 "/" 로 지정하면 된다.</span></b></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">해결 방법은 간단하지만 왜 이렇게 설정하면 잘 되는지 궁금해 졌다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">위에서 언급했지만 "/"로 정의한 경우 디폴트 서블릿을 의미한다고 하였다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">이게 뭔 말인가?</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">이 말의 의미를 찾아 보니&nbsp;</span><b><span style="font-size: 10pt;">디폴트 서블릿은 서블릿 매핑 URL에 걸리지 않는 요청들을 처리</span></b><span style="font-size: 10pt;">한다고 한다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">또 의문이 생긴다.</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">난 서블릿 매핑을 "/" 와 같이 한 개만 만들었는데...결국 거르는 작업 없이 내가 만들어 놓은 서블릿 매핑에 모두 걸리는 것 아닌가?</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">그리고 디폴트 서블릿은 뭔가?</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">위의 의문들을 해결하기 위해서 이제 tomcat 서블릿 컨테이너에 대해서 언급할 때가 왔다.</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">${TOMCAT_HOME}/conf/web.xml 파일을 열어 보면 다음과 같이 세 개의 서블릿 매핑이 존재한다.</span></div><div class="txc-textbox" style="background-color: #e7fdb5; border: 1px solid rgb(231, 253, 181); line-height: 1.5; padding: 10px;"><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;servlet-mapping&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-name&gt;default&lt;/servlet-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="color: red;"><b><span style="font-size: 10pt;">&lt;url-pattern&gt;/&lt;/url-pattern&gt;</span></b></span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;/servlet-mapping&gt;</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;servlet&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-name&gt;default&lt;/servlet-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-name&gt;debug&lt;/param-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-value&gt;0&lt;/param-value&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;/init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-name&gt;listings&lt;/param-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-value&gt;false&lt;/param-value&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;/init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;/servlet&gt;</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;servlet-mapping&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-name&gt;jsp&lt;/servlet-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="color: red;"><b><span style="font-size: 10pt;">&lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</span></b></span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;/servlet-mapping&gt;</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;servlet-mapping&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-name&gt;jsp&lt;/servlet-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="color: red;"><b><span style="font-size: 10pt;">&lt;url-pattern&gt;*.jspx&lt;/url-pattern&gt;</span></b></span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;/servlet-mapping&gt;</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;servlet&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-name&gt;jsp&lt;/servlet-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;servlet-class&gt;org.apache.jasper.servlet.JspServlet&lt;/servlet-class&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-name&gt;fork&lt;/param-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-value&gt;false&lt;/param-value&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;/init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-name&gt;xpoweredBy&lt;/param-name&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;">  </span><span style="font-size: 10pt;">&lt;param-value&gt;false&lt;/param-value&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;/init-param&gt;</span></div><div style="line-height: 1.5;"><span class="Apple-tab-span" style="font-size: 10pt; white-space: pre;"> </span><span style="font-size: 10pt;">&lt;load-on-startup&gt;3&lt;/load-on-startup&gt;</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;/servlet&gt;</span></div></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 2;"><span style="font-size: 10pt;">*.jsp, *.jspx와 같은 url 패턴은 JspServlet이 처리하고, DefaultServlet은 spring Controller mapping과 jsp 패턴에 걸리지 않는 요청 들을 처리한다는 결론이 나온다.</span></div><div style="line-height: 2;"><span style="font-size: 10pt;">즉,&nbsp;</span><span style="color: #ff5e00; font-size: 10pt;">DefaultServlet</span><span style="font-size: 10pt;">은 png, jpg, js, html등 정적인 content를 처리한다는 말이다.</span></div><div style="line-height: 2;"><br /></div><div style="line-height: 2;"><span style="font-size: 10pt;">정리하면&nbsp;</span></div><div style="line-height: 2;"><span style="font-size: 10pt;">ht</span><span style="color: black; font-size: 10pt;">tp://localhost:8080/user/userList.jsp &lt;- JspServlet 요청 처리</span></div><div style="line-height: 2;"><span style="color: black; font-size: 10pt;"><a class="con_link" href="http://localhost:8080/img/button.jpg" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://localhost:8080/img/button.jpg</a>&nbsp;&lt;-&nbsp;</span><span style="color: black; font-size: 10pt;">DefaultServlet</span><span style="color: black; font-size: 10pt;">&nbsp;요청 처리</span></div><div style="line-height: 2;"><span style="color: black; font-size: 10pt;"><a class="con_link" href="http://localhost:8080/user/list" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://localhost:8080/user/list</a>&nbsp;&lt;-&nbsp;</span><span style="color: black; font-size: 10pt;">DispatcherServlet</span><span style="color: black; font-size: 10pt;">&nbsp;요청 처리</span></div></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2;"><br /></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 2;"><div style="line-height: 1.5;"><span style="color: #0055ff;"><b><span style="color: black; font-size: 14pt;">[스프링에서 정적 content 호출 시 404 에러 발생]</span></b></span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">문제가 생겼다.</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;"><a class="con_link" href="http://localhost:8080/user/list" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://localhost:8080/user/list</a>&nbsp;는 정상적으로 동작하는데&nbsp;</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;"><a class="con_link" href="http://localhost:8080/img/button.jpg" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://localhost:8080/img/button.jpg</a>&nbsp;로 호출 할 때 404 에러가 발생한다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="color: black; font-size: 10pt;">DispatcherServlet</span><span style="color: black; font-size: 10pt;">&nbsp;with name 'dispatcher' processing GET request for [/img/button.jpg]</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="color: black; font-size: 10pt;">로그를 보면 *.jpg 호출 시 DefaultServlet이 처리하는 것이 아닌&nbsp;</span><span style="color: black; font-size: 10pt;">DispatcherServlet</span><span style="color: black; font-size: 10pt;">이 처리를 하게 되는 것을 볼 수 있다</span><span style="color: black; font-size: 10pt;">.</span></div><div style="line-height: 1.5;"><span style="color: black; font-size: 10pt;">당연히&nbsp;</span><span style="color: black; font-size: 10pt;">DispatcherServlet</span><span style="color: black; font-size: 10pt;">이 처리를 하게 되면 controller mapping URL이 존재하지 않으니 404 오류가 발생한다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="color: red;"><b><span style="font-size: 10pt;">DispatcherServlet은 url-pattern을 "/" 와 같이 설정하게 되면서 tomcat의 server.xml에 정의되어 있는 url-pattern "/"을 무시하기 때문이다.</span></b></span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">결국 DispatcherServlet url-pattern을 재정의하게 되어서 DefaultServlet은 더이상 동작할 수 없게 된 것이다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">스프링에서는 이를 해결하기 위해서 &lt;mvc:default-servlet-handler /&gt; 설정을 지원한다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;mvc:default-servlet-handler /&gt; 설정은 내부적으로 DefaultServletHttpRequestHandler가 담당하게 되고, 이 핸들러(컨트롤러)는 /**로 매핑되어 있다고 한다. (아래 토비님 글 참고)</span></div><div style="line-height: 1.5;"><a class="con_link" href="http://toby.epril.com/?p=1107" style="color: #666666; text-decoration: none; word-wrap: break-word;" target="_blank"><b><span style="font-size: 10pt;">[토스3] 스프링 3.0.4 &lt;mvc:default-servlet-handler/&gt;를 이용해서 UrlRewriteFilter없이 깔끔한 URL을 만들기</span></b></a></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">DefaultServletHttpRequestHandler가 하는 역할은 DispatcherServlet이 처리 못하는 매핑 url을&nbsp;DefaultServlet으로 넘기는 것이다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">드디어 정리 끝...</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">이라고 생각하면 오산.</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">&lt;mvc:default-servlet-handler /&gt; 설정을 추가하니&nbsp;<a class="con_link" href="http://localhost:8080/user/list" style="text-decoration: none; word-wrap: break-word;" target="_blank">http://localhost:8080/user/list</a>&nbsp;호출 시 404에러가 발생한다.</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">로그를 확인해 보니 이상한 부분이 있었다.&nbsp;</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">아래와 같이 SimpleUrlHandlerMapping에서 처리를 하고 있는 것이다.</span></div><div class="txc-textbox" style="background-color: #eeeeee; border: 1px solid rgb(238, 238, 238); line-height: 1.5; padding: 10px;"><span style="font-size: 10pt;">SimpleUrlHandlerMapping - Matching patterns for request [/user/list] are [/**]</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">디폴트 핸들러 매핑인 DefaultAnnotationHandlerMapping이 처리해야 하는데 왜 SimpleUrlHandlerMapping이 처리를 하게 된 것일까?</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">이유는 두 개 이상의 핸들러 매핑이 등록되었을 경우에는 디폴트 전략이 무시되기 때문이다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">결국 &lt;mvc:annotation-driven /&gt; 설정을 통해 DefaultAnnotationHandlerMapping이 자동 등록되게&nbsp;설정하였고, 이로써 모든 요청이 정상적으로 동작하였다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">단지 url-pattern만 정리하려고 했는데 꼬리에 꼬리를 물어서 스프링까지 설정까지 오게 되었다.</span></div><div style="line-height: 1.5;"><br /></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">지금까지 url-pattern에 대해서 대수롭지 않게 생각했는데 까면 깔수록 공부해야 할 것들이 산더미이다.</span></div><div style="line-height: 1.5;"><span style="font-size: 10pt;">그래도&nbsp;오늘 하루 내가 뭔가를 배울 수 있었다는 것에 보람을 느낀다.</span></div></div><div style="color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px; padding: 0px;"><br /></div><div class="entry-ccl" style="clear: both; color: #666666; font-family: '맑은 고딕'; line-height: 10.2857141494751px; margin-bottom: 10px; text-align: right;"><img alt="저작자 표시" class="entry-ccl-by" src="http://i1.daumcdn.net/cfs.tistory/v/0/static/admin/editor/ccl_black01.png" id="ccl-icon-97-0" style="border: 0px;" /></div></div></div><div class="author" style="background-color: white; color: #888888; font-family: Dotum, Verdana, AppleGothic, sans-serif; font-size: 12px; line-height: 10.2857141494751px; padding: 20px; text-align: right;"><span class="text" style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10.8571424484253px; line-height: normal;">Posted by&nbsp;</span>nklee</div>