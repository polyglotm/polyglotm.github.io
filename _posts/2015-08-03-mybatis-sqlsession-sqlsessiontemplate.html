---
layout: post
title: " [mybatis] SqlSession / SqlSessionTemplate"
date: '2015-08-03T06:30:00.002-07:00'
author: Jaeyoung Lee
tags:
- mybatis
modified_time: '2015-08-03T06:30:53.554-07:00'
blogger_id: tag:blogger.com,1999:blog-5872989675159532416.post-1985435437820953437
blogger_orig_url: http://polyglot-m.blogspot.com/2015/08/mybatis-sqlsession-sqlsessiontemplate.html
---

<u><br /></u><span style="font-size: x-large;"><u>[mybatis]&nbsp;</u></span><br /><span style="font-size: x-large;"><u>SqlSession / SqlSessionTemplate</u></span><br /><br /><br />원본 출처 :&nbsp;<a href="http://mybatis.github.io/spring/ko/sqlsession.html">http://mybatis.github.io/spring/ko/sqlsession.html</a><br />PS. mybatis는 오픈소스 프로젝트임으로 사전 동의없이 본 게시자가 documentaion을 인용하였으나 저작권 분쟁 발생시 즉각 삭제하겠습니다.<br />또한 mybatis는 오픈소스 프로젝트임으로 이 글을 상업적인 용도로 무단 복제,배포로 인한<br />책임은 모두 사용자에게 있습니다.<br /><br /><u>---------------------------------------------------------------------------------</u><br /><div><span class="pcol1 itemSubjectBoldfont" style="background-color: white; color: #3a32c3; display: inline; font-family: 돋움; font-size: 18px; font-weight: bold; letter-spacing: -1px;"></span><br /><div style="font-size: 12px; line-height: 10.2857141494751px; text-align: justify;"><span class="pcol1 itemSubjectBoldfont" style="background-color: white; color: #3a32c3; display: inline; font-family: 돋움; font-size: 18px; font-weight: bold; letter-spacing: -1px;"><br /></span></div><span class="pcol1 itemSubjectBoldfont" style="font-family: 돋움;"></span><br /><h2 style="background-color: white; color: #333333; display: inline; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 31.5px; font-weight: bold; letter-spacing: normal; line-height: 40px; margin: 10px 0px; padding: 0px; text-align: justify; text-rendering: optimizelegibility;"><span class="pcol1 itemSubjectBoldfont" style="font-family: 돋움;">Using an SqlSession<a class="con_link" href="https://www.blogger.com/null" name="Using_an_SqlSession" style="color: #0088cc; word-wrap: break-word;" target="_blank"></a></span></h2><span class="pcol1 itemSubjectBoldfont" style="font-family: 돋움;"></span><br /><div style="background-color: white; color: #333333; display: inline; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.2857141494751px; line-height: 20px; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px; text-align: justify;"><span class="pcol1 itemSubjectBoldfont" style="font-family: 돋움;">마이바티스에서는&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>를 생성하기 위해&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>를 사용한다. 세션을 한번 생성하면 매핑구문을 실행하거나 커밋 또는 롤백을 하기 위해 세션을 사용할수 있다. 마지막으로 더 이상 필요하지 않은 상태가 되면 세션을 닫는다. 마이바티스 스프링 연동모듈을 사용하면&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>를 직접 사용할 필요가 없다. 왜냐하면 사용할 빈이<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>에 주입될수 있기 때문이다. 이때&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>은 스프링 트랜잭션 설정에 따라 세션을 자동으로 커밋, 롤백하고 닫는 쓰레드에 안전하다.</span></div><span class="pcol1 itemSubjectBoldfont" style="font-family: 돋움;"><div class="section" style="background-color: white; color: #333333; display: inline; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.2857141494751px; line-height: 20px; text-align: justify;"><h3 style="bottom: 6px; color: inherit; font-family: inherit; font-size: 24.5px; line-height: 40px; margin: 10px 0px; padding: 0px; text-rendering: optimizelegibility;">SqlSessionTemplate<a class="con_link" href="https://www.blogger.com/null" name="SqlSessionTemplate" style="color: #0088cc; word-wrap: break-word;" target="_blank"></a></h3><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은 마이바티스 스프링 연동모듈의 핵심이다.&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>을 구현하고 코드에서&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>를 대체하는 역할을 한다.<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;은 쓰레드에 안전하고 여러개의 DAO나 매퍼에서 공유할수 있다.</div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">getMapper()</tt>에 의해 리턴된 매퍼가 가진 메서드를 포함해서 SQL을 처리하는 마이바티스 메서드를 호출할때&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>이 현재의 스프링 트랜잭션에서 사용될수 있도록 보장한다. 추가적으로&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은 필요한 시점에 세션을 닫고, 커밋하거나 롤백하는 것을 포함한 세션의 생명주기를 관리한다. 또한 마이바티스 예외를 스프링의&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">DataAccessException</tt>로 변환하는 작업또한 처리한다.</div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은 마이바티스의 디폴트 구현체인&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">DefaultSqlSession</tt>&nbsp;대신&nbsp;<b>항상</b>&nbsp;사용된다. 왜냐하면 템플릿은 스프링 트랜잭션의 일부처럼 사용될 수 있고 여러개 주입된 매퍼 클래스에 의해 사용되도록 쓰레드에 안전하다. 동일한 애플리케이션에서 두개의 클래스간의 전환은 데이터 무결성 이슈를 야기할수 있다.</div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은 생성자 인자로&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>를 사용해서 생성될 수 있다.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">&lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"&gt;<br />  &lt;constructor-arg index="0" ref="sqlSessionFactory" /&gt;<br />&lt;/bean&gt;</pre></div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;">이 빈은 DAO빈에 직접 주입될 수 있다. 다음처럼 빈 설정에서&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>&nbsp;프로퍼티를 설정하면 된다.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">public class UserDaoImpl implements UserDao {<br /><br />  private SqlSession sqlSession;<br /><br />  public void setSqlSession(SqlSession sqlSession) {<br />    this.sqlSession = sqlSession;<br />  }<br /><br />  public User getUser(String userId) {<br />    return (User) sqlSession.selectOne("org.mybatis.spring.sample.mapper.UserMapper.getUser", userId);<br />  }<br />}</pre></div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;">그리고 다음처럼&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;를 주입하자.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">&lt;bean id="userDao" class="org.mybatis.spring.sample.dao.UserDaoImpl"&gt;<br />  &lt;property name="sqlSession" ref="sqlSession" /&gt;<br />&lt;/bean&gt;</pre></div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>은 인자로&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">ExecutorType</tt>를 가지는 생성자를 가지고 있다. 이 인자는 예를들면 스프링 설정 XML을 다음처럼 설정해서 배치형태의&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>를 만들수도 있다.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">&lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"&gt;<br />  &lt;constructor-arg index="0" ref="sqlSessionFactory" /&gt;<br />  &lt;constructor-arg index="1" value="BATCH" /&gt;<br />&lt;/bean&gt;</pre></div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;">DAO의 코드를 다음처럼 작성했다면 모든 구문은 배치형태로 실행이 될 것이다.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">public void insertUsers(User[] users) {<br />   for (User user : users) {<br />     sqlSession.insert("org.mybatis.spring.sample.mapper.UserMapper.insertUser", user);<br />   }<br /> }</pre></div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;">이러한 설정형태는&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>의 디폴트 형태가 아닌 다른형태로 메서드를 실행해야 할때만 사용할 필요가 있다.</div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;">이러한 형태에 대해 굳이 경로를 하자면 메서드를 호출할때 ExecutorType이 다르면 이미 시작된 트랜잭션을 사용하지&nbsp;<b>못할</b>것이다. 다른 실행자(executor) 타입을 사용할때는<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>의 메서드를 구분된 트랜잭션(PROPAGATION_REQUIRES_NEW를 사용하는)이나 트랜잭션 외부에서 호출하는지 확실히해야 한다.</div></div><div class="section" style="background-color: white; color: #333333; display: inline; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.2857141494751px; line-height: 20px; text-align: justify;"><h3 style="bottom: 6px; color: inherit; font-family: inherit; font-size: 24.5px; line-height: 40px; margin: 10px 0px; padding: 0px; text-rendering: optimizelegibility;">SqlSessionDaoSupport<a class="con_link" href="https://www.blogger.com/null" name="SqlSessionDaoSupport" style="color: #0088cc; word-wrap: break-word;" target="_blank"></a></h3><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionDaoSupport</tt>는&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>을 제공하는 추상클래스이다.&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">getSqlSession()</tt>메서드를 호출해서 다음처럼 SQL을 처리하는 마이바티스 메서드를 호출하기 위해 사용할<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>을 얻을 수 있다.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">public class UserDaoImpl extends SqlSessionDaoSupport implements UserDao {<br />  public User getUser(String userId) {<br />    return (User) getSqlSession().selectOne("org.mybatis.spring.sample.mapper.UserMapper.getUser", userId);<br />  }<br />}</pre></div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;">대개&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">MapperFactoryBean</tt>은 추가적인 코드가 필요없기 때문에 이 클래스를 선호한다. 하지만 DAO에서 마이바티스가 필요하지 않고 구현된 클래스가 필요하지 않을때만 유용하다.</div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionDaoSupport</tt>는&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">sqlSessionFactory</tt>&nbsp;와&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">sqlSessionTemplate</tt>&nbsp;프로퍼티를 셋팅할 필요가 있다. 두개의 프로퍼티를 모두 셋팅하면&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">sqlSessionFactory</tt>는 무시된다.</div><div style="line-height: 1.5; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; padding: 0px;"><tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionDaoSupport</tt>의 하위클래스인&nbsp;<tt style="background-color: #fee9cc; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: rgba(0, 0, 0, 0.74902); font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">UserDaoImpl</tt>가 있다고 하면 스프링에서는 다음처럼 설정될 수 있다.</div><div class="source" style="line-height: 1.5;"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">&lt;bean id="userMapper" class="org.mybatis.spring.sample.mapper.UserDaoImpl"&gt;<br />  &lt;property name="sqlSessionFactory" ref="sqlSessionFactory" /&gt;<br />&lt;/bean&gt;</pre></div></div><div style="background-color: white; display: inline; font-size: 12px; line-height: 10.2857141494751px; padding: 0px; text-align: justify;"><br /></div><div style="background-color: white; display: inline; font-size: 12px; line-height: 10.2857141494751px; padding: 0px; text-align: justify;"><br /><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">-----------------------------------------------------------------------------------------------------</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18.4799995422363px; padding: 0px;"><span style="color: blue; font-family: 돋움; font-size: medium;"><span style="line-height: 14.3999996185303px;"><b>Publish to English-speaking users.</b></span></span></div><br style="color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18.479999542236328px; text-align: start;" /><div style="color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18.4799995422363px; padding: 0px;"><div style="color: black; font-family: Gulim; font-size: medium; line-height: normal; text-align: start;"><span style="font-size: x-large;"><u>[mybatis]&nbsp;</u></span></div><div style="color: black; font-family: Gulim; font-size: medium; line-height: normal; text-align: start;"><span style="font-size: x-large;"><u>SqlSession / SqlSessionTemplate</u></span></div></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">-----------------------------------------------------------------------------------------------------</div><h2 style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 31.5px; line-height: 40px; margin: 10px 0px; position: relative; text-align: start; text-rendering: optimizelegibility;"><span style="color: blue;">Using an SqlSession<a href="https://www.blogger.com/null" name="Using_an_SqlSession" style="color: #888888; text-decoration: none;"></a></span></h2><div style="color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 10px; margin-left: 7px; margin-right: 7px; text-align: start;"><span style="color: blue;">In MyBatis you use the&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>&nbsp;to create an&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>. Once you have a session, you use it to execute your mapped statements, commit or rollback connections and finally, when it is no longer needed, you close the session. With MyBatis-Spring you don't need to use<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>&nbsp;directly because your beans can be injected with a thread safe&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>&nbsp;that automatically commits, rollbacks and closes the session based on Spring's transaction configuration.</span></div><div class="section" style="color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin: 0px 15px; text-align: start;"><h3 style="font-family: inherit; font-size: 24.5px; line-height: 40px; margin: 10px 0px; position: relative; text-rendering: optimizelegibility;"><span style="color: blue;">SqlSessionTemplate<a href="https://www.blogger.com/null" name="SqlSessionTemplate" style="color: #888888; text-decoration: none;"></a></span></h3><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;"><tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;is the heart of MyBatis-Spring. It implements&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>&nbsp;and is meant to be a drop-in replacement for any existing use of<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>&nbsp;in your code.&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;is thread safe and can be shared by multiple DAOs or mappers.</span></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">When calling SQL methods, including any method from Mappers returned by&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">getMapper()</tt>,&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;will ensure that the&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>used is the one associated with the current Spring transaction. In addition, it manages the session life-cycle, including closing, committing or rolling back the session as necessary. It will also translate MyBatis exceptions into Spring&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">DataAccessException</tt>s.</span></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;"><tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;should&nbsp;<b>always</b>&nbsp;be used instead of default MyBatis implementation&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">DefaultSqlSession</tt>&nbsp;because the template can participate in Spring transactions and is thread safe for use by multiple injected mapper classes. Switching between the two classes in the same application can cause data integrity issues.</span></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">A&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;can be constructed using an&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>&nbsp;as a constructor argument.</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">&lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"&gt;<br />  &lt;constructor-arg index="0" ref="sqlSessionFactory" /&gt;<br />&lt;/bean&gt;</span></pre></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">This bean can now be injected directly in your DAO beans. You need a&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>&nbsp;property in your bean like the following</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">public class UserDaoImpl implements UserDao {<br /><br />  private SqlSession sqlSession;<br /><br />  public void setSqlSession(SqlSession sqlSession) {<br />    this.sqlSession = sqlSession;<br />  }<br /><br />  public User getUser(String userId) {<br />    return (User) sqlSession.selectOne("org.mybatis.spring.sample.mapper.UserMapper.getUser", userId);<br />  }<br />}</span></pre></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">And inject the&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;as follows</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">&lt;bean id="userDao" class="org.mybatis.spring.sample.dao.UserDaoImpl"&gt;<br />  &lt;property name="sqlSession" ref="sqlSession" /&gt;<br />&lt;/bean&gt;</span></pre></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;"><tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;has also a constructor that takes an&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">ExecutorType</tt>&nbsp;as an argument. This allows you to construct, for example, a batch<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>&nbsp;by using the following in Spring's configuration xml:</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">&lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"&gt;<br />  &lt;constructor-arg index="0" ref="sqlSessionFactory" /&gt;<br />  &lt;constructor-arg index="1" value="BATCH" /&gt;<br />&lt;/bean&gt;</span></pre></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">Now all your statements will be batched so the following could be coded in a DAO</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">public void insertUsers(User[] users) {<br />   for (User user : users) {<br />     sqlSession.insert("org.mybatis.spring.sample.mapper.UserMapper.insertUser", user);<br />   }<br /> }</span></pre></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">Note that this configuration style only needs to be used if the desired execution method differs from the default set for the&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionFactory</tt>.</span></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">The caveat to this form is that there&nbsp;<b>cannot</b>&nbsp;be an existing transaction running with a different ExecutorType when this method is called. Either ensure that calls to&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>s with different executor types run in a separate transaction (e.g. with PROPAGATION_REQUIRES_NEW) or completely outside of a transaction.</span></div></div><div class="section" style="color: #222222; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; margin: 0px 15px; text-align: start;"><h3 style="font-family: inherit; font-size: 24.5px; line-height: 40px; margin: 10px 0px; position: relative; text-rendering: optimizelegibility;"><span style="color: blue;">SqlSessionDaoSupport<a href="https://www.blogger.com/null" name="SqlSessionDaoSupport" style="color: #888888; text-decoration: none;"></a></span></h3><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;"><tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionDaoSupport</tt>&nbsp;is an abstract support class that provides you with a&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSession</tt>. Calling&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">getSqlSession()</tt>&nbsp;you will get a<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionTemplate</tt>&nbsp;which can then be used to execute SQL methods, like the following:</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">public class UserDaoImpl extends SqlSessionDaoSupport implements UserDao {<br />  public User getUser(String userId) {<br />    return (User) getSqlSession().selectOne("org.mybatis.spring.sample.mapper.UserMapper.getUser", userId);<br />  }<br />}</span></pre></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">Usually&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">MapperFactoryBean</tt>&nbsp;is preferred to this class, since it requires no extra code. But, this class is useful if you need to do other non-MyBatis work in your DAO and concrete classes are required.</span></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;"><tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionDaoSupport</tt>&nbsp;requires either an&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">sqlSessionFactory</tt>&nbsp;or an&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">sqlSessionTemplate</tt>&nbsp;property to be set. If both properties are set, the<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">sqlSessionFactory</tt>&nbsp;is ignored.</span></div><div style="margin-bottom: 10px; margin-left: 7px; margin-right: 7px;"><span style="color: blue;">Assuming a class&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">UserDaoImpl</tt>&nbsp;that subclasses&nbsp;<tt style="background-color: #fee9cc; border-radius: 3px; font-family: Monaco, 'Andale Mono', 'Courier New', monospace; font-size: 0.8em; padding: 1px 3px;">SqlSessionDaoSupport</tt>, it can be configured in Spring like the following:</span></div><div class="source"><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;"><span style="color: blue;">&lt;bean id="userMapper" class="org.mybatis.spring.sample.mapper.UserDaoImpl"&gt;<br />  &lt;property name="sqlSessionFactory" ref="sqlSessionFactory" /&gt;<br />&lt;/bean&gt;</span></pre></div></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><b><span style="font-size: 18pt;">PS-참고 소스(게시자가 직접 작성한 코드)</span></b><br /><b><span style="font-size: 18pt;"><br /></span></b></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">SqlSessionTemplate은 마이바티스 스프링 연동모듈의 핵심이다.</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">여러개의 dao에서 공유할수 있기 때문에 메모리 관리에 있어서 최적화된 테크닉이며,</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">SqlSessionTemplate은 생성자 인자로 SqlSessionFactory를 사용해서 생성될 수 있다.</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">그렇기 때문에 PropertyPlaceholderConfigurer 클래스로 jdbc.poperties 데이터를 읽어들인후</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">BasicDataSource클래스로 dataSource설정후</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">sqlSessionFactoryBean 으로 sqlSession을 생선한다음</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;">SqlSessionTemplate으로 재가공 해냅니다.</div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"><br /></div><div style="color: #222222; line-height: 14.3999996185303px; padding: 0px;"></div><span style="color: #222222; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px; line-height: 18.479999542236328px; text-align: start;"></span><br /><div style="-webkit-text-stroke-width: 0px; background-color: white; color: #222222; display: inline-block; font-family: 돋움; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 14.399999618530273px; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;"><div style="font-family: 나눔고딕, NanumGothic, 돋움, Dotum; line-height: 1.5;"><div style="display: inline; line-height: 1.5; width: auto;"><a class="con_link" href="http://prev.kr/app/ColorScripter" style="color: #010101; text-decoration: none; word-wrap: break-word;" target="_blank">Colored By&nbsp;<b><span style="color: #0099cc;">Color Scripter</span></b>™</a></div></div><div style="line-height: 1.5;"><table border="0" cellpadding="0" cellspacing="0" style="font-family: NanumGothicCoding, 나눔고딕코딩, 나눔고딕, NanumGothic, 돋움, Dotum; font-size: 13px; white-space: nowrap !important;"><tbody><tr style="margin: 0px; padding: 0px;"><td style="border-right-color: rgb(0, 153, 204); border-right-style: solid; border-right-width: 3px; color: #888888; margin: 0px; padding: 0px 3px; text-align: right; word-break: break-all;"><div style="line-height: 1.5;">1</div><div style="line-height: 1.5;">2</div><div style="line-height: 1.5;">3</div><div style="line-height: 1.5;">4</div><div style="line-height: 1.5;">5</div><div style="line-height: 1.5;">6</div><div style="line-height: 1.5;">7</div><div style="line-height: 1.5;">8</div><div style="line-height: 1.5;">9</div><div style="line-height: 1.5;">10</div><div style="line-height: 1.5;">11</div><div style="line-height: 1.5;">12</div><div style="line-height: 1.5;">13</div><div style="line-height: 1.5;">14</div><div style="line-height: 1.5;">15</div><div style="line-height: 1.5;">16</div><div style="line-height: 1.5;">17</div><div style="line-height: 1.5;">18</div><div style="line-height: 1.5;">19</div><div style="line-height: 1.5;">20</div><div style="line-height: 1.5;">21</div><div style="line-height: 1.5;">22</div><div style="line-height: 1.5;">23</div><div style="line-height: 1.5;">24</div><div style="line-height: 1.5;">25</div><div style="line-height: 1.5;">26</div><div style="line-height: 1.5;">27</div><div style="line-height: 1.5;">28</div><div style="line-height: 1.5;">29</div><div style="line-height: 1.5;">30</div><div style="line-height: 1.5;">31</div><div style="line-height: 1.5;">32</div><div style="line-height: 1.5;">33</div><div style="line-height: 1.5;">34</div><div style="line-height: 1.5;">35</div><div style="line-height: 1.5;">36</div></td><td style="color: #010101; margin: 0px; padding: 0px 3px; word-break: break-all;"><div style="background-color: #f7f7f7; line-height: 1.5;">&lt;?xml&nbsp;version=<span style="color: #993333;">"1.0"</span>&nbsp;encoding=<span style="color: #993333;">"UTF-8"</span>?&gt;</div><div style="line-height: 1.5;"></div><div style="background-color: #f7f7f7; line-height: 1.5;">&lt;beans&nbsp;xmlns=<span style="color: #993333;">"<a class="con_link" href="http://www.springframework.org/schema/beans" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.springframework.org/schema/beans</a>"</span></div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:context=<span style="color: #993333;">"<a class="con_link" href="http://www.springframework.org/schema/context" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.springframework.org/schema/context</a>"</span></div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=<span style="color: #993333;">"<a class="con_link" href="http://www.w3.org/2001/XMLSchema-instance" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>"</span></div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=<span style="color: #993333;">"<a class="con_link" href="http://www.springframework.org/schema/beans" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.springframework.org/schema/beans</a>&nbsp;</span></div><div style="background-color: #f7f7f7; line-height: 1.5;"><span style="color: #993333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="con_link" href="http://www.springframework.org/schema/beans/spring-beans-3.0.xsd" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</a></span></div><div style="line-height: 1.5;"><span style="color: #993333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="con_link" href="http://www.springframework.org/schema/context" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.springframework.org/schema/context</a></span></div><div style="background-color: #f7f7f7; line-height: 1.5;"><span style="color: #993333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="con_link" href="http://www.springframework.org/schema/context/spring-context-3.0.xsd" style="color: #888888; text-decoration: none; word-wrap: break-word;" target="_blank">http://www.springframework.org/schema/context/spring-context-3.0.xsd</a></span></div><div style="line-height: 1.5;"><span style="color: #993333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"</span>&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=<span style="color: #993333;">"propertyConfigurer"</span>&nbsp;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff3399;">class</span>=<span style="color: #993333;">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"location"</span>&nbsp;value=<span style="color: #993333;">"config/jdbc.properties"</span>&gt;&lt;/property&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bean&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=<span style="color: #993333;">"dataSource"</span>&nbsp;<span style="color: #ff3399;">class</span>=<span style="color: #993333;">"org.apache.commons.dbcp.BasicDataSource"</span>&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"driverClassName"</span>&nbsp;value=<span style="color: #993333;">"${jdbc.driverClassName}"</span>&gt;&lt;/property&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"url"</span>&nbsp;value=<span style="color: #993333;">"${jdbc.url}"</span>&gt;&lt;/property&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"username"</span>&nbsp;value=<span style="color: #993333;">"${jdbc.username}"</span>&gt;&lt;/property&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"password"</span>&nbsp;value=<span style="color: #993333;">"${jdbc.password}"</span>&gt;&lt;/property&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"initialSize"</span>&nbsp;value=<span style="color: #993333;">"${jdbc.initialSize}"</span>&gt;&lt;/property&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"maxActive"</span>&nbsp;value=<span style="color: #993333;">"${jdbc.maxActive}"</span>&gt;&lt;/property&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bean&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=<span style="color: #993333;">"sqlSessionFactoryBean"</span>&nbsp;<span style="color: #ff3399;">class</span>=<span style="color: #993333;">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"dataSource"</span>&nbsp;ref=<span style="color: #993333;">"dataSource"</span>/&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span style="color: #993333;">"configLocation"</span>&nbsp;value=<span style="color: #993333;">"config/mybatis-config13.xml"</span>&gt;&lt;/property&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bean&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=<span style="color: #993333;">"sqlSessionTemplate"</span>&nbsp;<span style="color: #ff3399;">class</span>=<span style="color: #993333;">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;constructor-arg&nbsp;ref=<span style="color: #993333;">"sqlSessionFactoryBean"</span>&gt;&lt;/constructor-arg&gt;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bean&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;context:component-scan&nbsp;base-<span style="color: #ff3399;">package</span>=<span style="color: #993333;">"mybatis.service.user.impl"</span>/&gt;</div><div style="background-color: #f7f7f7; line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="line-height: 1.5;">&lt;/beans&gt;</div></td></tr></tbody></table></div></div><br /></div><div style="background-color: white; display: inline; font-size: 12px; line-height: 10.2857141494751px; padding: 0px; text-align: justify;"><br /></div></span><span class="pcol1 itemSubjectBoldfont" style="font-family: 돋움;"><div style="background-color: white; display: inline; font-size: 12px; line-height: 10.2857141494751px; padding: 0px; text-align: justify;"></div></span></div>